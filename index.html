<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CITB4 - Thermal Simulation</title>
    <!-- Link to the external stylesheet -->
    <link rel="stylesheet" href="src/style.css" />
    <!-- Link to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header section containing the logo and navigation -->
    <header class="site-header">
      <div class="header-container">
        <div class="logo-container">
          <!-- The logo image. Assumes it's in an 'images' folder. -->
          <img src="images/logo.png" alt="CITB4 Logo" class="logo" />
          <h1>Phoenix Simulation</h1>
        </div>
        <!-- Hamburger menu button for mobile -->
        <button class="hamburger" id="hamburger" aria-label="Toggle navigation">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <!-- Main navigation menu -->
        <nav class="main-nav" id="main-nav">
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="src/pages/technology.html">Technology</a></li>
            <li>
              <a
                href="https://www.fiverr.com"
                target="_blank"
                rel="noopener noreferrer"
                class="external-link"
                >Order service via fiverr
                <svg
                  class="external-icon"
                  width="12"
                  height="12"
                  viewBox="0 0 12 12"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10.5 7.5V10.5H1.5V1.5H4.5"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M6 6L11 1"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M11 4V1H8"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  /></svg
              ></a>
            </li>
            <li><a href="src/pages/contact.html">Contact</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Main content area of the page -->
    <main class="main-content">
      <div class="content-container">
        <!-- Introduction section -->
        <section class="intro">
          <h2>
            Affordable thermal simulation for FFF/material extrusion users and
            its ecosystem
          </h2>
        </section>

        <!-- Images section -->
        <section class="images-section">
          <!-- Desktop view: 3 images side by side -->
          <div class="desktop-images">
            <img src="images/pic1.png" alt="Thermal simulation example 1" />
            <img src="images/pic2.png" alt="Thermal simulation example 2" />
            <img src="images/pic3.png" alt="Thermal simulation example 3" />
          </div>
          
          <!-- Mobile view: slideshow -->
          <div class="mobile-slideshow">
            <div class="slideshow-container">
              <div class="main-image">
                <img id="current-image" src="images/pic1.png" alt="Thermal simulation example 1" />
                <button class="nav-btn prev-btn" id="prev-btn" aria-label="Previous image">❮</button>
                <button class="nav-btn next-btn" id="next-btn" aria-label="Next image">❯</button>
              </div>
              <div class="thumbnails">
                <img class="thumbnail active" data-index="0" src="images/pic1.png" alt="Thumbnail 1" />
                <img class="thumbnail" data-index="1" src="images/pic2.png" alt="Thumbnail 2" />
                <img class="thumbnail" data-index="2" src="images/pic3.png" alt="Thumbnail 3" />
              </div>
            </div>
          </div>
        </section>

        <!-- Wrapper for the two column layout -->
        <div class="features-wrapper">
          <!-- Features section -->
          <section class="content-box">
            <h3>Why CITB4?</h3>
            <ul>
              <li>Fast and computationally efficient</li>
              <li>Accuracy similar to a FEA based simulation</li>
            </ul>
          </section>

          <!-- Benefits section -->
          <section class="content-box">
            <h3>Why should you simulate?</h3>
            <ul>
              <li>Print first time right. Less waste.</li>
              <li>Get better process awareness before you start the print.</li>
              <li>Understand overheating / under-heating</li>
              <li>Predict the chance for deformation and warpping*</li>
              <li>An add-on for the QA report</li>
            </ul>
          </section>
        </div>

        <!-- Video section -->
        <section class="video-section">
          <video controls autoplay muted loop>
            <source src="video/landing_vid.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </section>
      </div>
    </main>

    <!-- Footer will be loaded here -->
    <div id="footer-placeholder"></div>

    <!-- JavaScript for hamburger menu and slideshow -->
    <script>
      // Load footer component
      fetch('src/components/footer.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('footer-placeholder').innerHTML = data;
        })
        .catch(error => console.error('Error loading footer:', error));
    </script>
    <script>
      const hamburger = document.getElementById("hamburger");
      const mainNav = document.getElementById("main-nav");

      hamburger.addEventListener("click", () => {
        hamburger.classList.toggle("active");
        mainNav.classList.toggle("active");
      });

      // Close menu when clicking on a link
      const navLinks = mainNav.querySelectorAll("a");
      navLinks.forEach((link) => {
        link.addEventListener("click", () => {
          hamburger.classList.remove("active");
          mainNav.classList.remove("active");
        });
      });

      // Slideshow functionality
      const images = [
        { src: "images/pic1.png", alt: "Thermal simulation example 1" },
        { src: "images/pic2.png", alt: "Thermal simulation example 2" },
        { src: "images/pic3.png", alt: "Thermal simulation example 3" }
      ];
      
      let currentIndex = 0;
      const currentImage = document.getElementById("current-image");
      const thumbnails = document.querySelectorAll(".thumbnail");
      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");

      function updateImage(index) {
        currentIndex = index;
        currentImage.src = images[index].src;
        currentImage.alt = images[index].alt;
        
        // Update thumbnail active state
        thumbnails.forEach((thumb, i) => {
          thumb.classList.toggle("active", i === index);
        });
      }

      function nextImage() {
        const nextIndex = (currentIndex + 1) % images.length;
        updateImage(nextIndex);
      }

      function prevImage() {
        const prevIndex = (currentIndex - 1 + images.length) % images.length;
        updateImage(prevIndex);
      }

      // Button event listeners
      if (nextBtn) nextBtn.addEventListener("click", nextImage);
      if (prevBtn) prevBtn.addEventListener("click", prevImage);

      // Thumbnail click handlers
      thumbnails.forEach((thumb, index) => {
        thumb.addEventListener("click", () => updateImage(index));
      });

      // Touch/swipe functionality
      let startX = 0;
      let startY = 0;
      let endX = 0;
      let endY = 0;

      const mainImageContainer = document.querySelector(".main-image");
      
      if (mainImageContainer) {
        mainImageContainer.addEventListener("touchstart", (e) => {
          startX = e.touches[0].clientX;
          startY = e.touches[0].clientY;
        }, { passive: true });

        mainImageContainer.addEventListener("touchend", (e) => {
          endX = e.changedTouches[0].clientX;
          endY = e.changedTouches[0].clientY;
          handleSwipe();
        }, { passive: true });

        function handleSwipe() {
          const deltaX = endX - startX;
          const deltaY = endY - startY;
          const minSwipeDistance = 50;

          // Only process horizontal swipes (ignore vertical scrolling)
          if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > minSwipeDistance) {
            if (deltaX > 0) {
              // Swipe right - go to previous image
              prevImage();
            } else {
              // Swipe left - go to next image
              nextImage();
            }
          }
        }

        // Keyboard navigation
        document.addEventListener("keydown", (e) => {
          // Only handle keys if slideshow is visible (mobile)
          if (window.innerWidth <= 768) {
            if (e.key === "ArrowLeft") {
              e.preventDefault();
              prevImage();
            } else if (e.key === "ArrowRight") {
              e.preventDefault();
              nextImage();
            }
          }
        });
      }
    </script>
  </body>
</html>
