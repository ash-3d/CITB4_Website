<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phoenix - Thermal Simulation</title>
    <!-- Link to the external stylesheet -->
    <link rel="stylesheet" href="src/style.css" />
    <!-- Link to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header section containing the logo and navigation -->
    <header class="site-header">
      <div class="header-container">
        <a href="index.html" class="logo-container">
          <!-- The logo image. Assumes it's in an 'images' folder. -->
          <img src="images/logo.png" alt="Logo" class="logo" />
          <h1>Phoenix Simulation</h1>
        </a>
        <!-- Hamburger menu button for mobile -->
        <button class="hamburger" id="hamburger" aria-label="Toggle navigation">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <!-- Main navigation menu -->
        <nav class="main-nav" id="main-nav">
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#price-estimator">Price Estimator</a></li>
            <li><a href="src/pages/technology.html">Technology</a></li>
            <li>
              <a
                href="https://www.fiverr.com"
                target="_blank"
                rel="noopener noreferrer"
                class="external-link"
                >Order service via Fiverr (available soon)
                <svg
                  class="external-icon"
                  width="12"
                  height="12"
                  viewBox="0 0 12 12"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M10.5 7.5V10.5H1.5V1.5H4.5"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M6 6L11 1"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M11 4V1H8"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  /></svg
              ></a>
            </li>
            <li><a href="src/pages/contact.html">Contact</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Main content area of the page -->
    <main class="main-content">
      <div class="content-container">
        <!-- Introduction section -->
        <section class="intro">
          <h2>
            Affordable thermal simulation for FFF/material-extrusion 3D printing
          </h2>
        </section>

        <!-- Images section -->
        <section class="images-section">
          <!-- Desktop view: 3 images side by side -->
          <div class="desktop-images">
            <img src="images/pic1.png" alt="Thermal simulation example 1" />
            <img src="images/pic2.png" alt="Thermal simulation example 2" />
            <img src="images/pic3.png" alt="Thermal simulation example 3" />
          </div>
          
          <!-- Mobile view: slideshow -->
          <div class="mobile-slideshow">
            <div class="slideshow-container">
              <div class="main-image">
                <img id="current-image" src="images/pic1.png" alt="Thermal simulation example 1" />
                <button class="nav-btn prev-btn" id="prev-btn" aria-label="Previous image">❮</button>
                <button class="nav-btn next-btn" id="next-btn" aria-label="Next image">❯</button>
              </div>
              <div class="thumbnails">
                <img class="thumbnail active" data-index="0" src="images/pic1.png" alt="Thumbnail 1" />
                <img class="thumbnail" data-index="1" src="images/pic2.png" alt="Thumbnail 2" />
                <img class="thumbnail" data-index="2" src="images/pic3.png" alt="Thumbnail 3" />
              </div>
            </div>
          </div>
        </section>

        <!-- Wrapper for the two column layout -->
        <div class="features-wrapper">
          <!-- Features section -->
          <section class="content-box">
            <h3>Why Phoenix Simulation?</h3>
            <ul>
              <li>Fast and computationally efficient</li>
              <li>Accuracy comparable to an FEA-based simulation</li>
            </ul>
          </section>

          <!-- Benefits section -->
          <section class="content-box">
            <h3>Why should you simulate?</h3>
            <ul>
              <li>Print right the first time and reduce waste.</li>
              <li>Gain better process awareness before you start printing.</li>
              <li>Understand overheating and underheating.</li>
              <li>Estimate deformation and warping risks</li>
              <li>Valuable add-on to your QA report</li>
            </ul>
          </section>
        </div>

        <!-- Cost Estimation section -->
        <section id="price-estimator" class="cost-estimator">
          <h2>Estimate your simulation cost</h2>
          <div class="estimator-container">
            <div class="estimator-inputs">
              <div class="form-row">
                <div class="form-group">
                  <label for="df">Diameter of filament (mm)</label>
                  <input type="number" id="df" step="0.01" placeholder="e.g., 1.75" required />
                </div>
                <div class="form-group">
                  <label for="lf">Length of filament used for the part (mm)</label>
                  <input type="number" id="lf" step="0.01" placeholder="e.g., 5000" required />
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label for="dn">Diameter of nozzle (mm)</label>
                  <input type="number" id="dn" step="0.01" placeholder="e.g., 0.4" required />
                </div>
                <div class="form-group">
                  <label for="h">Layer/slice height (mm)</label>
                  <input type="number" id="h" step="0.01" placeholder="e.g., 0.2" required />
                </div>
              </div>
              <button class="submit-btn" id="estimate-btn">Estimate</button>
            </div>
            <div class="estimator-result" id="result-container" style="display: none;">
              <p class="result-text" id="result-text"></p>
              <a href="mailto:hello@phoenixsimulation.com?subject=Quote Request&body=Hello, I would like to request a quote for simulation services." class="cta-button">Request a quote</a>
            </div>
          </div>
        </section>

        <!-- Video section -->
        <section class="video-section">
          <video controls autoplay muted loop>
            <source src="video/landing_vid.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </section>
      </div>
    </main>

    <!-- Footer will be loaded here -->
    <div id="footer-placeholder"></div>

    <!-- JavaScript for hamburger menu and slideshow -->
    <script>
      // Load footer component
      fetch('src/components/footer.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('footer-placeholder').innerHTML = data;
        })
        .catch(error => console.error('Error loading footer:', error));

      const estimateBtn = document.getElementById("estimate-btn");
      const resultContainer = document.getElementById("result-container");
      const resultText = document.getElementById("result-text");

      if (estimateBtn) {
        estimateBtn.addEventListener("click", () => {
          const df = parseFloat(document.getElementById("df").value);
          const lf = parseFloat(document.getElementById("lf").value);
          const dn = parseFloat(document.getElementById("dn").value);
          const h = parseFloat(document.getElementById("h").value);

          if (isNaN(df) || isNaN(lf) || isNaN(dn) || isNaN(h)) {
            alert("Please fill in all fields with valid numbers.");
            return;
          }

          if (df <= 0 || lf <= 0 || dn <= 0 || h <= 0) {
            alert("All values must be greater than 0.");
            return;
          }

          const _0x21a6 = [
            "pow",
            "0x2",
            "0.0000213629",
            "toFixed",
            "innerHTML"
          ];
          const _0x54b6 = (a, b, c, d) => {
            const m = Math[_0x21a6[0]](a, parseInt(_0x21a6[1], 16));
            return (m * b) / (c * d);
          };
          const _0x3b5c = _0x54b6(df, lf, dn, h);
          const _0x4606 = _0x3b5c * parseFloat(_0x21a6[2]);

          resultText[_0x21a6[4]] = `Your approximate simulation price is <strong>€${_0x4606[
            _0x21a6[3]
          ](2)}</strong> + applicable taxes`;
          resultContainer.style.display = "block";
          resultContainer.scrollIntoView({ behavior: "smooth", block: "nearest" });
        });
      }
    </script>
    <script>
      const hamburger = document.getElementById("hamburger");
      const mainNav = document.getElementById("main-nav");

      hamburger.addEventListener("click", () => {
        hamburger.classList.toggle("active");
        mainNav.classList.toggle("active");
      });

      // Close menu when clicking on a link
      const navLinks = mainNav.querySelectorAll("a");
      navLinks.forEach((link) => {
        link.addEventListener("click", () => {
          hamburger.classList.remove("active");
          mainNav.classList.remove("active");
        });
      });

      // Slideshow functionality
      const images = [
        { src: "images/pic1.png", alt: "Thermal simulation example 1" },
        { src: "images/pic2.png", alt: "Thermal simulation example 2" },
        { src: "images/pic3.png", alt: "Thermal simulation example 3" }
      ];
      
      let currentIndex = 0;
      const currentImage = document.getElementById("current-image");
      const thumbnails = document.querySelectorAll(".thumbnail");
      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");

      function updateImage(index) {
        currentIndex = index;
        currentImage.src = images[index].src;
        currentImage.alt = images[index].alt;
        
        // Update thumbnail active state
        thumbnails.forEach((thumb, i) => {
          thumb.classList.toggle("active", i === index);
        });
      }

      function nextImage() {
        const nextIndex = (currentIndex + 1) % images.length;
        updateImage(nextIndex);
      }

      function prevImage() {
        const prevIndex = (currentIndex - 1 + images.length) % images.length;
        updateImage(prevIndex);
      }

      // Button event listeners
      if (nextBtn) nextBtn.addEventListener("click", nextImage);
      if (prevBtn) prevBtn.addEventListener("click", prevImage);

      // Thumbnail click handlers
      thumbnails.forEach((thumb, index) => {
        thumb.addEventListener("click", () => updateImage(index));
      });

      // Touch/swipe functionality
      let startX = 0;
      let startY = 0;
      let endX = 0;
      let endY = 0;

      const mainImageContainer = document.querySelector(".main-image");
      
      if (mainImageContainer) {
        mainImageContainer.addEventListener("touchstart", (e) => {
          startX = e.touches[0].clientX;
          startY = e.touches[0].clientY;
        }, { passive: true });

        mainImageContainer.addEventListener("touchend", (e) => {
          endX = e.changedTouches[0].clientX;
          endY = e.changedTouches[0].clientY;
          handleSwipe();
        }, { passive: true });

        function handleSwipe() {
          const deltaX = endX - startX;
          const deltaY = endY - startY;
          const minSwipeDistance = 50;

          // Only process horizontal swipes (ignore vertical scrolling)
          if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > minSwipeDistance) {
            if (deltaX > 0) {
              // Swipe right - go to previous image
              prevImage();
            } else {
              // Swipe left - go to next image
              nextImage();
            }
          }
        }

        // Keyboard navigation
        document.addEventListener("keydown", (e) => {
          // Only handle keys if slideshow is visible (mobile)
          if (window.innerWidth <= 768) {
            if (e.key === "ArrowLeft") {
              e.preventDefault();
              prevImage();
            } else if (e.key === "ArrowRight") {
              e.preventDefault();
              nextImage();
            }
          }
        });
      }
    </script>
  </body>
</html>
